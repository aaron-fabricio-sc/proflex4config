/**
 @preserve
 Copyright (c) 2001-2020 by Wincor Nixdorf International GmbH,
 Heinz-Nixdorf-Ring 1, 33106 Paderborn, Germany

 This software is the confidential and proprietary information
 of Diebold Nixdorf.
 You shall not disclose such Confidential Information and shall
 use it only in accordance with the terms of the license agreement
 you entered into with Diebold Nixdorf.

$MOD$ ProFlex4Op.js 4.3.1-201218-21-31b1b05f-1a04bc7d
 */
define(["jquery","knockout","ui-content","config/Config","extensions"],(function(e,t,i,r,a){"use strict";const n=Wincor.UI.Service.Provider.LogProvider,o=Wincor.UI.Service.Provider.DataService,l=Wincor.UI.Service.Provider.LocalizeService,s=Wincor.UI.Service.Provider.ViewService,u=Wincor.UI.Service.Provider.EventService,c=Wincor.UI.Service.Provider.FormatService,g={GUI_KEY_PREFIX:"GUI_",HEADLINE_SUFFIX:"_Headline"},d="Button",p="PROP_CURRENCY_ISO",O="PROP_CURRENCY_ADA_TEXT",m="PROP_CURRENCY_EXP",f="PROP_LISE_CONFIGURATION",L=u.getEventInfo("TRANSACTION_MODULE");let b,A,S=null,_=-1;function N(){-1!==_&&(u.deregisterEvent(_),_=-1)}function x(e,t){let i,r;t+="=";for(let a=e.length-1;a>=0;a--)if(i=e[a],r=i.indexOf(t),0===r)return i.substr(r+t.length);return-1}function P(t,i){let r=-1;const a=s.viewContext.viewConfig.commandconfig;if(void 0!==a&&i in a){const o=a[i];if(!e.isNumeric(o)){let a=o,l=null;if(-1!==o.indexOf(";")){let e=o.split(";");a=e[0],l=e[1]}void 0!==l&&e.isNumeric(l)&&(t.defaultViewState=parseInt(l)),r=a,n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`* ProFlex4Op::extractViewStateFromConfig from command config (${a}) for '${i}', state=${r}, defaultViewState=${l}`)}else r=parseInt(o),n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`* ProFlex4Op::extractViewStateFromConfig from command config for '${i}', state=${r}`)}return r}function G(e,t){if(t){let i;for(let r=0;r<t.length;r++)i=t[r],"object"==typeof i&&(i=Object.keys(i)[0],e.push(i),G(e,t[r][i]))}}function I(e,t){for(let i=e.length-1;i>=0;i--)if(e[i].result===t){e.splice(i,1);break}}function y(e,t,i,r,a){if(e){let o,l=0,s=[];for(;l<e.length;){if(o=e[l],"string"==typeof o){let i=g.getItem(t,o);i&&r?(r.push(i),I(t,o),2!==i.state&&3!==i.state||s.push(i.state)):i||(e.splice(l,1),l--,n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`. ProFlex4Op::buildElementTree Warning: Submenu business item=${o} is not in the item list !`),a&&!e.length&&(a.state=3,n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`. ProFlex4Op::buildElementTree (subMenu array empty) Submenu function item=${a.result} has been set state=${a.state}, because no sub tree item is available (enabled).`)))}else{o=Object.keys(o)[0];let r=g.getItem(t,o);r?(r.isSubMenuFunc=!0,r.subMenuFuncName=o,r.memberOfLevel=l,i.push(r),r[o]=[],I(t,o),y(e[l][o],t,i[l][o],r[o],r),!a||s.length!==l||2!==r.state&&3!==r.state||(a.state=s[0]||r.state,n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`. ProFlex4Op::buildElementTree Submenu function item=${a.result} has been set state=${a.state}, because no sub tree item is available (enabled).`))):n.error(`. ProFlex4Op::buildElementTree Error: Submenu function item=${o} is not in the item list !`)}l++}a&&l>0&&s.length===l&&(a.state=s[0],n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`. ProFlex4Op::buildElementTree (end of brach) Submenu function item=${a.result} has been set state=${a.state}, because no sub tree item is available (enabled).`))}return i}function h(e){if(Array.isArray(e)){let t,i,r=0;for(;r<e.length;){if(t=e[r],t&&t.isSubMenuFunc)if(i=t[t.subMenuFuncName],1===i.length){let a=i.pop();n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`. ProFlex4Op::optimizeElementTree Submenu function '${t.subMenuFuncName}' has been dissolved. The last available item '${a.result}' moved up to its next higher level ${e[r].memberOfLevel}.`),e[r]=a,r--}else 0===i.length?(n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`. ProFlex4Op::optimizeElementTree (subMenu array empty) Submenu function '${t.subMenuFuncName}' has been dissolved, because it was empty.`),e.splice(r,1),r--):h(i);t=e[0],1===e.length&&t.isSubMenuFunc&&1===t[t.subMenuFuncName].length?r=0:r++}}return e}function E(e,t,i){n.LOG_DATA&&n.log(n.LOG_DATA,`. ProFlex4Op::replaceNumbers: key=${e}, raw=${t}, pattern=${i}`);let r,a=i.match("{.*}");if(null===a)return i;a=a[0];try{r=JSON.parse(a)}catch(t){return n.error(`Warning: ProFlex4Op::replaceNumbers(): Invalid configuration, no parsable JSON found in ${e}='${i}'. exception=${t}`),`N/A: ${e}`}if(void 0===r.text||null===r.text)return n.error(`Warning: ProFlex4Op::replaceNumbers(): Invalid configuration, no 'replacer' attribute found in ${e}='${i}'.`),`N/A: ${e}`;let o={raw:t};r.formatOption?c.format(o,r.formatOption,null,!0):(o.result=t,n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`ProFlex4Op::replaceNumbers(): No format option given in ${e}='${i}'.`));const l=r.text.replace("(#rawdata#)",o.result),s=i.replace(a,l);return n.LOG_DATA&&n.log(n.LOG_DATA,`. ProFlex4Op::replaceNumbers: ret='${s}'`),s}function v(e,t){n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`ProFlex4Op::removeFromList Attention: Item ${e.items[t].result} has been removed from the list, because it's state is hidden and item gaps is not desired.`),e.items.splice(t,1),e.captionKeys.splice(t,1),e.adaKeys.splice(t,1),e.adaPostKeys.splice(t,1),e.iconKeys.splice(t,1)}function F(i,r,s,u,c){return n.LOG_INOUT&&n.log(n.LOG_INOUT,`> ProFlex4Op::gatherLISEData rawProps[0]=${i[0]}, viewStateProp=${i[1]}, stepSize=${r}, maxIdx(computed)=${s}, viewKey=${u}`),a.Promises.promise((async(a,p)=>{let O=await o.getValues(i,null,null);if(O&&Object.keys(O).length>0){let m=[],f=[],L=[],b=[],S=[],_=[],N=[],x={items:m,captionKeys:f,adaKeys:L,adaPostKeys:b,iconKeys:S,viewStateKeys:N,priorities:c,viewKey:u};O[i[1]]&&(_=O[i[1]].split(","));const I=O[i[0]],F=null!=c&&!0===c.itemgaps,T=-1!==s&&s<=I.length?s:I.length;if(n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`. ProFlex4Op::getLiseValuesCallback data length=${I.length}, data length to loop=${T}`),T>0&&T%r==0){for(let i=0,a=0;i<T;i++,a++){let o=0,l=I[i];if(n.LOG_DATA&&n.log(n.LOG_DATA,`. ProFlex4Op::getLiseValuesCallback found LISE value=${l}`),null===l){p(`ProFlex4Op::gatherLISEData LISE value of index=${i} is null, further processing makes no sense!`);break}if(m[a]={captions:[],adaText:"",adaPost:"",state:0,result:l,icon:t.observable(""),rawresult:`ITEM_${a}`,rawdata:[t.observable(l)],order:999,staticpos:-1,prominent:""},o++,m[a].state=void 0===_[a]?-1:parseInt(_[a]),-1===m[a].state){let t,i=P(m[a],l),r=!1;if(-1===i?t=g.buildViewStateKey(l):(t=i,r=e.isNumeric(t),r||(m[a].viewStateKey=t)),3===t&&!F){m[a].state=3,n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`ProFlex4Op::getViewStateKeysCallback Attention: Item ${l} has been skipped from the list, because it's state (retrieved from command config) is hidden and item gaps is not desired.`);continue}r||N.push(t),m[a].state=t}switch(m[a].staticpos=g.getItemStaticPosFromPriorities(I,l,c),m[a].prominent=g.getItemProminentFromPriorities(I,l,c),S[a]=g.buildGuiKey(u,d,l,"Icon1"),r){case 1:f[a]=g.buildGuiKey(u,d,l),L[a]=g.buildGuiKey(u,d,l,"ADA"),b[a]=g.buildGuiKey(u,d,l,"ADA_Clicked");break;case 2:i++,m[a].adaText=I[i],m[a].rawdata[o]=t.observable(I[i]),o++,f[a]=g.buildGuiKey(u,d,l);break;case 3:i++,m[a].adaText=I[i],m[a].rawdata[o]=t.observable(I[i]),i++,o++,m[a].captions[0]=t.observable(I[i]),m[a].rawdata[o]=t.observable(I[i]),o++;break;default:i++,m[a].adaText=I[i],m[a].rawdata[o]=t.observable(I[i]),i++,o++,m[a].captions[0]=t.observable(I[i]),m[a].rawdata[o]=t.observable(I[i]),i++,o++;let e=r-2;if(i<T)for(let r=1;r<e;r++)m[a].captions[r]=t.observable(I[i]),m[a].rawdata[o]=t.observable(I[i]),o++,r<e-1&&i++}}if(g.isSubmenus(c)){let e,i=[];try{G(i,c.submenus);for(let r=0;r<i.length;r++){let a=i[r];e={captions:[],adaText:"",adaPost:"",state:0,result:a,icon:t.observable(""),rawresult:`ITEM_${m.length+r}`,rawdata:[t.observable(a)],order:999,staticpos:-1,prominent:""},e.staticpos=g.getItemStaticPosFromPriorities(i,a,c),e.prominent=g.getItemProminentFromPriorities(i,a,c),m.push(e),f.push(g.buildGuiKey(u,d,a)),L.push(g.buildGuiKey(u,d,a,"ADA")),b.push(g.buildGuiKey(u,d,a,"ADA_Clicked")),S.push(g.buildGuiKey(u,d,a,"Icon1"))}}catch(e){throw p(`getSubmenuFunctionCaptionsFromPriorities failed: ${e}`),e}}try{await async function(i){let{items:r,captionKeys:a,adaKeys:o,adaPostKeys:s,iconKeys:u,viewKey:c}=i;n.LOG_INOUT&&n.log(n.LOG_INOUT,`> ProFlex4Op::processTextualKeys for viewKey=${c}`);const d=g.buildGuiKey(c,"NumberConfiguration"),p=g.buildGuiKey(c,"NumberConfiguration_ADA"),O=g.buildGuiKey(c,"NumberConfiguration_ADA_Clicked"),m=g.buildGuiKey(c,"NumberConfiguration_Icon1"),f=[d,p,O,m];let L,b,A,S,_=a.concat(o,s,u,f);if(!(_.length>f.length))throw"ProFlex4Op::processTextualKeys No localized text available !";{_=_.filter(((e,t,i)=>i.indexOf(e)===t));let i=!1;await l.getText(_,(function(l){n.LOG_DETAIL&&n.log(n.LOG_DETAIL,`. ProFlex4Op::processTextualKeys getTextCallback=${JSON.stringify(l)}`);for(let e=0;e<r.length;e++)a.length&&(t.isObservable(r[e].captions[0])?r[e].captions[0](l[a[e]]):r[e].captions[0]=t.observable(l[a[e]])),o.length&&(r[e].adaText=l[o[e]]),s.length&&(r[e].adaPost=l[s[e]]),!i&&u.length&&(t.isObservable(r[e].icon)?r[e].icon(l[u[e]]):r[e].icon=t.observable(l[u[e]]));let g,f;for(L=l[d],b=l[p],A=l[O],S=l[m],f=a.length-1;f>=0;f--)null===r[f].captions[0]()&&(g=r[f].rawdata[0](),e.isNumeric(g)&&L?r[f].captions[0](E(a[f],g,L)):(r[f].captions[0]("N/A: "+a[f]),n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`Warning: ProFlex4Op::processTextualKeys: For ViewKey ${c} no label configured for '${g}'.`)));for(f=o.length-1;f>=0;f--)null===r[f].adaText&&(g=r[f].rawdata[0](),e.isNumeric(g)&&b?r[f].adaText=E(o[f].adaText,g,b):n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`Warning: ProFlex4Op::processTextualKeys For ViewKey ${c} no adaText configured for '${g}'.`));for(f=s.length-1;f>=0;f--)null===r[f].adaPost?(g=r[f].rawdata[0](),e.isNumeric(g)&&A?r[f].adaPost=E(s[f],g,A):(r[f].adaPost=r[f].adaText,n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`Warning: ProFlex4Op::processTextualKeys For ViewKey ${c} no adaClicked text configured for '${g}'.`))):""===r[f].adaPost&&(r[f].adaPost=r[f].adaText);if(!i)for(f=u.length-1;f>=0;f--)null===r[f].icon()&&(S&&e.isNumeric(r[f].result)?r[f].icon(S):(r[f].icon(""),n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`Warning: ProFlex4Op::processTextualKeys For ViewKey ${c} no icon configured for '${r[f].result}'.`)));i=!0}))}n.LOG_INOUT&&n.log(n.LOG_INOUT,"< ProFlex4Op::processTextualKeys (Promise)")}(x)}catch(e){throw p(e),e}try{await async function(t){let{items:i,viewStateKeys:r,priorities:a}=t;n.LOG_INOUT&&n.log(n.LOG_INOUT,`> ProFlex4Op::processViewStateKeys for viewStateKeys=${r}`);let l=null!=a&&!0===a.itemgaps;if(r.length){let a=r.filter(((e,t,i)=>i.indexOf(e)===t)),s=await o.getValues(a,null,null);n.LOG_DATA&&n.log(n.LOG_DATA,`. ProFlex4Op::getViewStateKeysCallback=${JSON.stringify(s)}`);for(let a=0;a<r.length;a++){let n,o=r[a];if(o in s){let r=s[o];for(n=i.length-1;n>=0;n--)if(i[n].state===o){null!==r&&e.isNumeric(r)?i[n].state=parseInt(r):void 0!==i[n].defaultViewState?i[n].state=i[n].defaultViewState:i[n].state=0,i[n].viewStateKey&&delete i[n].viewStateKey;break}l||3!==i[n].state||(v(t,n),n--)}}}if(!l){let e=0;for(;e<i.length;e++)3===i[e].state&&(v(t,e),e--)}n.LOG_INOUT&&n.log(n.LOG_INOUT,"< ProFlex4Op::processViewStateKeys (Promise)")}(x);const t={priorities:c,elements:m};if(g.isSubmenus(c)){let e=[].concat(m);try{if(n.LOG_INFO&&n.log(n.LOG_INFO,"ProFlex4Op::gatherLISEData Now build element tree with sub menus"),t.elements=y(c.submenus,e,[]),void 0!==c.letSingleSubMenuFunctionBubbleUp&&!0!==c.letSingleSubMenuFunctionBubbleUp||(n.LOG_INFO&&n.log(n.LOG_INFO,"ProFlex4Op::gatherLISEData Now optimize element tree with sub menus"),t.elements=h(t.elements)),!0!==c.itemgaps)for(let e=t.elements.length-1;e>=0;e--)3===t.elements[e].state&&(n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`ProFlex4Op::gatherLISEData Attention: Item ${t.elements[e].result} has been removed from the list, because it's state is hidden and item gaps is not desired.`),t.elements.splice(e,1));t.elements=t.elements.concat(e),A={data:t,items:m}}catch(e){throw p(`buildElementTree() failed: ${e}`),e}}n.LOG_DETAIL&&n.log(n.LOG_DETAIL,`. ProFlex4Op::gatherLISEData data=${JSON.stringify(t,((e,t)=>"function"==typeof t?t():t))}`),n.LOG_INOUT&&n.log(n.LOG_INOUT,"< ProFlex4Op::gatherLISEData"),a(t)}catch(e){p(e)}}else p("ProFlex4Op::gatherLISEData: No LISE items available, modulo check items length / step size failed!")}else p("ProFlex4Op::gatherLISEData: No specialized LISE props available !")}))}return g.setViewModelContainer=e=>{b=e},g.clean=()=>{n.LOG_INFO&&n.log(n.LOG_INFO,". ProFlex4Op::clean"),A=void 0},g.shutdown=()=>{g.clean(),b=null,S=null,N()},g.buildGuiKey=(...e)=>1===(e=e.filter((e=>!!e))).length?`${g.GUI_KEY_PREFIX}${e[0]}_`:`${g.GUI_KEY_PREFIX}${e.join("_")}`,g.getGuiKeySuffixPart=(e,t)=>{if(!e||e.length<g.GUI_KEY_PREFIX.length)return e;if(t)e=e.slice(`${g.GUI_KEY_PREFIX}${t}`.length+1);else{let t=e.split("_");t.length>2&&(e=t.splice(2).join("_"))}return e},g.buildViewStateKey=e=>`VAR_${e}_VIEWSTATE_S`,g.getBankingContextData=(t,s)=>{const d=this;return a.Promises.promise((async function(a,f){function b(){const e=s.getById("flexHeader");if(e){let t=e.time();S.dateTime.date=e.date(),S.dateTime.time=t.time,S.dateTime.meridiem=t.meridiem}}async function A(i){if(i!==S.currencyData.iso){n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`. ProFlex4Op::getBankingContextData::getBankingData viewKey=${t}, currencyIso=${i}`);let r=await o.getValues([p,O,m],null,null);const a=parseInt(r.PROP_CURRENCY_EXP),s=g.buildGuiKey(t,"Label","CurrencySymbol"),u=g.buildGuiKey(t,"Label","Currency");let d=await l.getText([s,u]);S.currencyData.iso=r.PROP_CURRENCY_ISO,S.currencyData.exponent=e.isNumeric(a)?a:-2,S.currencyData.ada=r.PROP_CURRENCY_ADA_TEXT,S.currencyData.text=d[u],S.currencyData.symbol=d[s],b(),n.LOG_DATA&&n.log(n.LOG_DATA,`. ProFlex4Op::getBankingContextData::::getBankingData resolved=${JSON.stringify(S)}`),c.bankingContext=S}return S}if(!S||S&&!S.currencyData.iso){const e=!S;if(S={dateTime:{date:"",time:"",meridiem:""},currencyData:{iso:"",exponent:-2,ada:"",text:"",symbol:""}},i.designMode)try{let e=await r.retrieveJSONData("BankingContextData");n.LOG_DATA&&n.log(n.LOG_DATA,`. ProFlex4Op::getBankingContextData::promise resolved=${JSON.stringify(e)}`),S=e,b(),a(S)}catch(e){f(e)}else e&&(N(),_=u.registerForEvent(L.ID_CURRENCY_CHANGE,L.NAME,A.bind(d),null,"ASCII",!0)),await A(),a(S)}else b(),a(S)}))},g.getItemStaticPosFromPriorities=(e,t,i)=>{if(i&&void 0!==i.staticpos){let r,a=i.staticpos;for(let i=e.length-1;i>=0;i--)if(r=x(a,t),e[i]===t&&-1!==r)return r=parseInt(r),r<1||r>8?(n.error("static position out of range. item="+t),-1):(n.LOG_DATA&&n.log(n.LOG_DATA,`. ProFlex4Op::getItemStaticPosFromPriorities positions=${t}, ${JSON.stringify(a)}`),r)}return-1},g.getItemProminentFromPriorities=(e,t,i)=>{if(i&&void 0!==i.prominent){let r,a=i.prominent;for(let i=e.length-1;i>=0;i--)if(r=x(a,t),e[i]===t&&-1!==r)return n.LOG_DATA&&n.log(n.LOG_DATA,`. ProFlex4Op::getItemProminentFromPriorities prominent=${t}, ${JSON.stringify(a)}`),r}return""},g.getLiseIndex=(e,t)=>{if(t=g.isSubmenus()?A.items:t)for(let i=t.length-1;i>=0;i--)if(t[i].result===e||t[i].rawresult===e)return n.LOG_DATA&&n.log(n.LOG_DATA,`. ProFlex4Op::getLiseIndex resultId=${e} with idx=${i}`),i;return n.LOG_DATA&&n.log(n.LOG_DATA,". ProFlex4Op::getLiseIndex idx:-1"),-1},g.isSubmenus=e=>void 0!==(e=e||(A?A.data.priorities:void 0))&&void 0!==e.submenus,g.getItem=(e,t)=>{if(e=e||(A?A.items:null))for(let i=e.length-1;i>=0;i--)if(e[i].result===t)return e[i];return null},g.getGenericListData=(t,l)=>(n.LOG_INOUT&&n.log(n.LOG_INOUT,`> ProFlex4Op::getGenericListData currentSubFunction=${l}`),a.Promises.promise((async(a,u)=>{if(i.designMode||l||A)if(i.designMode)try{let e=await r.retrieveJSONData("ListViewData"),i=!1;for(let r of e.examples)if(r.viewKey===t){i=!0;let e=sessionStorage.getItem("menuPriorities");if(e)r.priorities=JSON.parse(e),A={data:r};else{if(!l){A={data:r},a(r);break}{e=r.priorities,delete r.priorities,A={data:r};let t=b.viewModelHelper.getPropertyValue(r,l);t?a({priorities:e,elements:t}):u(`No sub menu found for currentSubFunction=${l}`)}}}i||u(`No example found in ListViewData.json with viewKey=${t}`)}catch(e){u(e)}else{let e=l?b.viewModelHelper.getPropertyValue(A.data.elements,l):A.data.elements;e?a({priorities:A.data.priorities,elements:e}):u(`No sub menu found for ${l}`)}else{let i=null,r=null,l=s.viewContext.viewConfig;l&&void 0!==l.priorities&&(i=e.extend(!0,{},l.priorities),void 0!==i.extendedpriorities&&(r=i.extendedpriorities,n.LOG_DATA&&n.log(n.LOG_DATA,`. ProFlex4Op::getGenericListData extendedPrioritiesProp=${r}`)));let c=await o.getValues(r?[f,r]:[f],null,null),d=c.PROP_LISE_CONFIGURATION,p=[];if(n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`. ProFlex4Op::getLISEConfigurationCallback LISE conf=${d}`),d&&""!==d){try{if(r&&c[r]){const e=JSON.parse(c[r]);n.LOG_DATA&&n.log(n.LOG_DATA,`. ProFlex4Op::getLISEConfigurationCallback extendedPrioritiesData=${JSON.stringify(e)}`),(g.isSubmenus(i)&&e.order&&e.order.length||e.prominent&&e.prominent.length)&&delete i.submenus,i.submenus||(i.prominent=[]),i=Object.assign(i,e)}n.LOG_DATA&&n.log(n.LOG_DATA,`. ProFlex4Op::getLISEConfigurationCallback priorities=${JSON.stringify(i)}`)}catch(e){throw u(`ProFlex4Op::getGenericListData JSON parse error occurred priorities data ${e}`),e}d=d.split(",");let e=d[0],o=parseInt(d[1]),l=parseInt(d[2]);n.LOG_ANALYSE&&n.log(n.LOG_ANALYSE,`. ProFlex4Op::getLISEConfigurationCallback accessProp=${e}, startIdx=${o}, stepSize=${l}, [viewStateProp]=${d[3]?d[3]:"NA"}, [maxIdx]=${d[4]?d[4]:"NA"}`),p[0]=e+"[A,idx,stepsize]".replace("idx",o.toString()).replace("stepsize",l.toString()),d[3]&&(p[1]=d[3]);let s=d[4]?parseInt(d[4]):-1;if(-1!==s&&o<=s?s=s-o+1:-1!==s&&o>s&&(s=-2),-2!==s)try{let e=await F(p,l,s,t,i);n.LOG_INOUT&&n.log(n.LOG_INOUT,"< ProFlex4Op::getGenericListData"),a(e)}catch(e){u(e)}else u(`ProFlex4Op::getGenericListData: LISE configuration error: startIdx=${o} > maxIdx=${s}`)}else u(`ProFlex4Op::getGenericListData: No related LISE configuration available for viewkey=${t}`)}}))),g}));